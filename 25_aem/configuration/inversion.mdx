---

title: 'Inversion Configuration'

---

The inversion configuration file specifies the parameters and algorithms used to process the collected data and generate the subsurface model. It includes settings for the experiment, inversion constants, initial model, and sigma values to guide the inversion process and produce accurate results.


The configuration file is provided as a yaml file in the data subfolder. Please see the following example: 

<Accordion title="Example Inversion Configuration File:">
  ```yaml config_inversion.yaml
  experiment: 
    name: "benchmark"
    shengbar_range: [-500,350]
    schedule_strategy: "fixed"
    num_gpu: 2
    source_dx: 10
    use_topo: True
  
  data:  
    inversion_tc_start: 14
    inversion_tc_end: 24
    data_eps: 1.0e-14
    data_std: 0.05

  inversion_constants:
    noise_threshold: 1.0e-12
    optimizer: "PGNCG"
    optimizer_constants:
      maxIter: 1
      LSshorten: 0.5
      maxIterLS: 20
    BetaSchedule:
      coolingFactor: 1
      coolingRate: 3
    beta: 2.0
    alphas: 
      alpha_s: 0.0025
      alpha_x: 100.0
      alpha_y: 100.0
    weighting_flag: False
    weighting_constants:
      type: "penetration_limit"
      alpha: 2.0
      penetration_limit_start: 600
      penetration_limit_end: 650
      limit_weight_max: 5
    upper_bound_flag: False
    upper_bound_value: 3 
    reg_sparse: False

  init_model: 
    load_init_model: False
    init_model_path: ""
    init_directory_path: ""
    init_model_scale: "log"

  sigmas:
    sigma_background: 1.0e-3
    sigma_air: 1.0e-8

  ```
</Accordion>


The following sections describe the key components of the inversion configuration file and their respective parameters:

### Experiment

<AccordionGroup>
  <Accordion  title="Experiment Name (name)">
  The name of the experiment is "benchmark". This will be used in the name of the inversion folder. Data Type: String.
  <Warning> The experiment name should not contain any spaces, otherwise, the inversion process may fail. </Warning>
  </Accordion>
  <Accordion  title="Shengbar Range (shengbar_range)">
  The z range for Shengbar plots in the form of a list with two integers. This will determine the range that will be plotted as the model updates each iteration. Data Type: List of two integers.
  </Accordion>
  <Accordion  title="Schedule Strategy (schedule_strategy)">
  The scheduling strategy for the inversion is 'fixed'. Data Type: String.
  </Accordion>
  <Accordion  title="Number of GPUs (num_gpu)">
  The number of GPUs to be used on each line. Data Type: Positive Integer.
  </Accordion>
  <Accordion  title="Source Dx (source_dx)">
  The source dx value in meters. This is the distance between source-receiver pairs that will be sampled and used from the data. Data Type: Positive Float.
  </Accordion>
  <Accordion  title="Use Topography (use_topo)">
  Whether to use the topography in the inversion. If this is True the earth will not be approximated to have a flat surface at z=0. Data Type: Boolean.
  </Accordion>
</AccordionGroup>

### Data

<AccordionGroup>
  <Accordion  title="Inversion Time Channel Start (inversion_tc_start)">
  The index of the first time channel to be used in the inversion. Data Type: Positive Integer.
  </Accordion>
  <Accordion  title="Inversion Time Channel End (inversion_tc_end)">
  The index of the last time channel to be used in the inversion. Data Type: Positive Integer.
  </Accordion>
  <Accordion  title="Data Epsilon (data_eps)">
  The epsilon value for data processing in the inversion. Data Type: Positive Float.
  </Accordion>
  <Accordion  title="Data Standard Deviation (data_std)">
  The standard deviation for data noise. Data Type: Positive Float.
  </Accordion>
</AccordionGroup>

### Inversion Constants

<AccordionGroup>
  <Accordion  title="Noise Threshold (noise_threshold)">
  The noise threshold value for the inversion process. Any data which is below this value will be masked and not contribute to the loss and gradients for the full global mesh. Data Type: Positive Float.
  </Accordion>
  <Accordion  title="Optimizer (optimizer)">
  The optimizer to be used for the inversion. Valid options are: "PGNCG" (Projected Gauss-Newton Conjugate Gradient). Data Type: String.
  </Accordion>
  <Accordion  title="Optimizer Constants (optimizer_constants)">
  Constants for the optimizer, including:
  * maxIter: Maximum number of iterations is set to 1. Data Type: Positive Integer.
  * LSshorten: Line search shortening factor. Data Type: Positive Float.
  * maxIterLS: Maximum number of line search iterations. Data Type: Positive Integer.
  </Accordion>
  <Accordion  title="Beta Schedule (BetaSchedule)">
  Settings for the beta schedule, including:
  * coolingFactor: Cooling factor for the beta schedule. Data Type: Non-negative Float.
  * coolingRate: Cooling rate for the beta schedule. Data Type: Non-negative Integer.
  </Accordion>
  <Accordion  title="Beta (beta)">
  The beta value for the inversion process. Data Type: Positive Float.
  </Accordion>
  <Accordion  title="Alphas (alphas)">
  Alpha values for the inversion, including:
  * alpha_s: Alpha value for smoothness is 0.0025. Data Type: Non-negative Float.
  * alpha_x: Alpha value for x-direction is 100.0. Data Type: Non-negative Float.
  * alpha_y: Alpha value for y-direction is 100.0. Data Type: Non-negative Float.
  </Accordion>
  <Accordion  title="Weighting Flag (weighting_flag)">
  Whether to apply any depth weighting in the inversion. Data Type: Boolean.
  </Accordion>
  <Accordion  title="Weighting Constants (weighting_constants)">
  Constants for the weighting, including:
  * type: Type of weighting. Data Type: String.
  * alpha: Alpha value for weighting. Data Type: Non-negative Float.
  * penetration_limit_start: Start value for penetration limit. Data Type: Non-negative Float.
  * penetration_limit_end: End value for penetration limit. Data Type: Non-negative Float.
  * limit_weight_max: Maximum weight limit. Data Type: Non-negative Float.
  </Accordion>
  <Accordion  title="Upper Bound Flag (upper_bound_flag)">
  Whether to apply an upper bound in the inversion. Data Type: Boolean.
  </Accordion>
  <Accordion  title="Upper Bound Value (upper_bound_value)">
  The upper bound value for the inversion. Data Type: Positive Float.
  </Accordion>
  <Accordion  title="Regularization Sparse (reg_sparse)">
  Whether to apply sparse regularization. Data Type: Boolean.
  </Accordion>
</AccordionGroup>

### Initial Model

<AccordionGroup>
  <Accordion  title="Load Initial Model (load_init_model)">
  Whether to load an initial model. Data Type: Boolean.
  </Accordion>
  <Accordion  title="Initial Model Path (init_model_path)">
  The path to the initial model file. Data Type: String.
  </Accordion>
  <Accordion  title="Initial Directory Path (init_directory_path)">
  The path to the directory containing initial model files. Data Type: String.
  </Accordion>
  <Accordion  title="Initial Model Scale (init_model_scale)">
  The scale of the initial model. Valid options are: "linear", "log". Data Type: String.
  </Accordion>
</AccordionGroup>

### Sigmas

<AccordionGroup>
  <Accordion  title="Sigma Background (sigma_background)">
  The background conductivity value. Data Type: Positive Float.
  </Accordion>
  <Accordion  title="Sigma Air (sigma_air)">
  The air conductivity value. Data Type: Positive Float.
  </Accordion>
</AccordionGroup>
